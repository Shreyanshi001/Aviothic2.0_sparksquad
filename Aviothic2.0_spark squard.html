<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Oxford institute Information Portal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #linear-gradient(135deg,#a18cd1,#fbc2eb);
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      animation:fadeIn 1s ease;
      background: #dda0dd; 
      @keyframes fadeIn {
        from { opacity: 0; transform:
        translate(10px); }
        to { opacity: 1; transform:
        translateY(0); }
      }
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      width: 90%;
      max-width: 800px;
      text-align: center;
    }

    h1 {
      margin-bottom: 5px;
      color: darkorchid;
    }

    h2 {
      font-weight: normal;
      color: #555;
      margin-bottom: 25px;
    }

    label {
      font-weight: bold;
    }

    select {
      padding: 8px;
      margin-left: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    #search-area {
      margin: 20px 0;
      display: none;
    }

    #search-input {
      padding: 8px;
      width: 60%;
      max-width: 300px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      color: #333;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }

    th {
      background: #004aad;
      color: white;
    }

    tr:hover {
      background: #f3e8ff;
      transform: scale(1.01);
      transition: all 0.2sec ease;
    }

    .details-row td {
      background: #f0f8ff;
      transition: all 0.3s ease;
    }

    tr.expanded {
      background: #eef6ff;
    }

    #theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #004aad;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
    }

    body.dark-mode {
      background: #222;
      color: #ddd; /* corrected text color */
    }

    body.dark-mode .container {
      background: #333;
    }

    body.dark-mode table {
      color: #ddd; /* table text light in dark mode */
      border-color: #555;
    }

    body.dark-mode th {
      background: #666;
      color: #fff;
    }

    body.dark-mode tr.details-row td {
      background: #444;
    }

    body.dark-mode tr:hover {
      background: #555;
    }

    footer {
      margin-top: 25px;
      font-size: 0.85em;
      color: #777;
    }

    mark {
      background: yellow;
      color: black;
    }
  </style>
</head>
<body>
  <button id="theme-toggle">Dark Mode</button>

  <div class="container">
    <h1>OXFORD INSTITUTE OF TECHNOLOGY AND PHARMACY</h1>
    <h2>Information Portal</h2>

    <div id="role-selection-area">
      <label for="role-selection">Choose Role:</label>
      <select id="role-selection">
        <option value="">-- Select --</option>
        <option value="student">Student</option>
        <option value="teacher">Teacher</option>
      </select>
    </div>

    <div id="search-area">
      <input type="text" id="search-input" placeholder="Search by name...">
    </div>

    <div id="content-area">
      <div id="table-output"></div>
    </div>

    <footer>Â© 2025 Oxford Institute of Technology and Pharmacy | Designed by SUBHI YADAV & SHREYANSHI SHARMA</footer>
  </div>

  <script>
    const studentData = [
      { name: "Shreyanshi Sharma", course: "BCA", sec: "C"},
      { name: "Subhi Yadav", course: "BCA", sec: "C"},
      { name: "Shivani Kushwaha", course: "BCA", sec: "C"},
      { name: "Shivam Mishra", course: "BCA", sec: "C"},
      { name: "Ritik Singh", course: "BCA", sec: "C" },
      { name: "Saurabh Yadav", course: "BCA", sec: "C"},
      { name: "Shiv Datt", course: "BCA", sec: "C" },
      { name: "Sharthak Maurya", course: "BCA", sec: "C" },
      { name: "Tapasya Gupta", course: "BCA", sec: "C" },
      { name: "Yuvraj Singh", course: "BCA", sec: "C" }
    ];

    const teacherData = [
      { name: "Sukh Sagar Mishra", subject: "Maths", Department: "Applied Science" },
      { name: "Ms. Fariya Khan", subject: "Environment & Ecology", Department: "Biotechnology"},
      { name: "Mr. Karam Hans Puri", subject: "C Programming", Department: "Computer Application"},
      { name: "Ms. Sharda Yadav", subject: "Operating System / Cyber Security", Department: "Computer Application" },
      { name: "Mr. Deepak Srivastav", subject: "Python", Department: "Computer Application" },
      {name:"Mr. Ayush Shrivastav",subject:"Data structure and Algorithm/C-programming",Department:"Computer Application"},
      {name:"Mr. Subodh Kumar",subject:"Data structure and Algorithm",Department:"Computer Application"},
      {name:"Ms.Juhi Yadav",subject:"Business Communication",Department:"BBA"},
      {name:"Ms. Nishu Bhadoriya",subject:"Principle of management",Department:"BBA"},
      {name:"Alankrita Gupta",subject:"Control system , Power system protection and electrical measurement and instrument",Department:"Electrical and Electronics"},
      {name:"Ms. Veena singh",subject:"Transmission and Distribution of electrical power",Department:"Electrical and Electronics"}
    ];

    let currentRole = "";
    let filteredData = [];

    const roleSelect = document.getElementById("role-selection");
    const searchArea = document.getElementById("search-area");
    const searchInput = document.getElementById("search-input");
    const tableOutput = document.getElementById("table-output");

    roleSelect.addEventListener("change", onRoleChange);
    searchInput.addEventListener("input", onSearch);
    tableOutput.addEventListener("click", onRowClick);

    function onRoleChange() {
      currentRole = roleSelect.value;
      searchInput.value = "";
      if (!currentRole) {
        searchArea.style.display = "none";
        tableOutput.innerHTML = "";
        return;
      }
      searchArea.style.display = "block";
      filteredData = currentRole === "student" ? [...studentData] : [...teacherData];
      renderTable();
    }

    function onSearch() {
      const q = searchInput.value.trim().toLowerCase();
      const source = currentRole === "student" ? studentData : teacherData;
      filteredData = source.filter(item => item.name.toLowerCase().includes(q));
      renderTable(q);
    }

    function highlightMatch(text, query) {
      if (!query) return text;
      const regex = new RegExp(`(${query.replace(/[-/\\^$*+?.()|[\]{}]/g, '\\$&')})`, 'gi');
      return text.replace(regex, '<mark>$1</mark>');
    }

    function renderTable(query = "") {
      if (!filteredData.length) {
        tableOutput.innerHTML = "<p>No records found.</p>";
        return;
      }

      const headers = currentRole === "student"
        ? ["Name", "Course", "Section"]
        : ["Name", "Subject", "Department"];

      let html = "<table><thead><tr>";
      headers.forEach(h => html += `<th>${h}</th>`);
      html += "</tr></thead><tbody>";

      filteredData.forEach((item, i) => {
        const c2 = currentRole === "student" ? item.course : item.subject;
        const c3 = currentRole === "student" ? item.sec : item.Department;
        html += `<tr data-index="${i}" data-role="${currentRole}">
          <td>${highlightMatch(item.name, query)}</td>
          <td>${c2}</td>
          <td>${c3}</td>
        </tr>`;
      });

      html += "</tbody></table>";
      tableOutput.innerHTML = html;
    }

    function onRowClick(e) {
      const row = e.target.closest("tr[data-index]");
      if (!row) return;

      const existing = document.querySelector(".details-row");
      const same = existing && existing.previousElementSibling === row;
      if (existing) existing.remove();
      document.querySelectorAll("tr.expanded").forEach(r => r.classList.remove("expanded"));
      if (same) return;

      row.classList.add("expanded");
      const index = parseInt(row.getAttribute("data-index"), 10);
      const role = row.getAttribute("data-role");
      const data = filteredData[index];

      const detailsRow = document.createElement("tr");
      detailsRow.className = "details-row";

      const td = document.createElement("td");
      td.colSpan = 3;

      if (role === "student") {
        td.innerHTML = `
          <b>Name:</b> ${data.name}<br>
          <b>Course:</b> ${data.course}<br>
          <b>Section:</b> ${data.sec}
        `;
      } else {
        td.innerHTML = `
          <b>Name:</b> ${data.name}<br>
          <b>Department:</b> ${data.Department}<br>
          <b>Subject:</b> ${data.subject}
        `;
      }

      detailsRow.appendChild(td);
      row.parentNode.insertBefore(detailsRow, row.nextSibling);
    }

    const toggleBtn = document.getElementById("theme-toggle");
    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      toggleBtn.textContent = document.body.classList.contains("dark-mode")
        ? "Light Mode"
        : "Dark Mode";
    });
  </script>
</body>
</html>
